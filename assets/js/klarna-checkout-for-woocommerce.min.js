jQuery(function(e){var o;(o={bodyEl:e("body"),checkoutFormSelector:"form.checkout",orderNotesValue:"",orderNotesSelector:"textarea#order_comments",orderNotesEl:e("textarea#order_comments"),paymentMethodEl:e('input[name="payment_method"]'),paymentMethod:"",selectAnotherSelector:"#klarna-checkout-select-other",documentReady:function(){o.paymentMethodEl.length>0?o.paymentMethod=o.paymentMethodEl.filter(":checked").val():o.paymentMethod="klarna_checkout_for_woocommerce"},kcoSuspend:function(){window._klarnaCheckout(function(e){e.suspend()})},kcoResume:function(){window._klarnaCheckout(function(e){e.resume()})},update:function(){o.kcoSuspend(),e("body").trigger("update_checkout"),e.ajax({type:"POST",url:"/checkout/?wc-ajax=kco_wc_update_cart",data:{checkout:e("form.checkout").serialize()},success:function(e){},error:function(e){},complete:function(e){o.kcoResume()}})},updateOrderNotes:function(){o.orderNotesEl.val()!==o.orderNotesValue&&(o.orderNotesValue=o.orderNotesEl.val(),e.ajax({type:"POST",url:"/checkout/?wc-ajax=kco_wc_update_order_notes",data:{order_notes:o.orderNotesValue},success:function(e){},error:function(e){},complete:function(e){console.log("complete",e)}}))},refreshCheckoutFragment:function(t){t.preventDefault(),e(o.checkoutFormSelector).block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),e.ajax({type:"POST",dataType:"json",data:{kco:!1},url:"/checkout/?wc-ajax=kco_wc_refresh_checkout_fragment",success:function(e){},error:function(e){},complete:function(t){console.log(t.responseJSON),e(o.checkoutFormSelector).replaceWith(t.responseJSON.data.fragments.checkout),e(o.checkoutFormSelector).unblock()}})},refreshCheckoutFragmentKco:function(t){console.log(e(this).val()),"klarna_checkout_for_woocommerce"===e(this).val()&&(e(".woocommerce-info").remove(),e(o.checkoutFormSelector).block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),e.ajax({type:"POST",data:{kco:!0},dataType:"json",url:"/checkout/?wc-ajax=kco_wc_refresh_checkout_fragment",success:function(e){},error:function(e){},complete:function(t){console.log(t.responseJSON),e(o.checkoutFormSelector).replaceWith(t.responseJSON.data.fragments.checkout),e(o.checkoutFormSelector).unblock()}}))},init:function(){e(document).ready(o.documentReady),o.bodyEl.on("change","input.qty, input.shipping_method",o.update),o.bodyEl.on("blur",o.orderNotesSelector,o.updateOrderNotes),o.bodyEl.on("change",'input[name="payment_method"]',o.refreshCheckoutFragmentKco),o.bodyEl.on("click",o.selectAnotherSelector,o.refreshCheckoutFragment)}}).init()});